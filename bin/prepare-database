#!/bin/bash -e

echo "ğŸ” Checking database connection..."

# Wait for database to be ready
until bin/rails runner "ActiveRecord::Base.connection.execute('SELECT 1')" > /dev/null 2>&1; do
  echo "â³ Waiting for database to be ready..."
  sleep 2
done

echo "âœ… Database connection established!"

# Check if database exists, if not create it
echo "ğŸ”§ Preparing database..."
bin/rails db:prepare

echo "ğŸš€ Database is ready!"
